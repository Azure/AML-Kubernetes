name: tf-mnist
type: online
auth_mode: key
target: azureml:<your GPU compute target name>
traffic:
  green: 100
identity:
  type: system_assigned

deployments:
  #green deployment
  - name: green
    model:
      name: tf-mnist
      version: 1
      local_path: ./model/
    code_configuration:
      code: 
        local_path: ./script/
      scoring_script: score.py
    instance_type: <your instance type>
    environment: 
      name: tf-mnist-model
      version: 1
      path: .
      conda_file: file:./model/conda.yml
      docker:
        image: mcr.microsoft.com/azureml/openmpi3.1.2-ubuntu18.04:20210727.v1
    scale_settings:
      scale_type: manual
      instance_count: 1
    request_settings:
      request_timeout_ms: 3000
      max_concurrent_requests_per_instance: 1
      max_queue_wait_ms: 3000
    resource_requirements:
      cpu: 1
      memory_in_gb: 1
      gpu: 1
