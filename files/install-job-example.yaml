apiVersion: batch/v1
kind: Job
metadata:
  labels:
    app: cmaks-init-job
  name: cmaks-init-job
  namespace: default
spec:
  template:
    metadata:
      labels:
        job-name: cmaks-init-job
    spec:
      containers:
      - env:
        - name: KUBE_CONF
          value: |
            apiVersion: v1
            clusters:
            - cluster:
                certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdJQmNOTWpBd05URTRNRE15TURNMFdoZ1BNakExTURBMU1UZ3dNek13TXpSYQpNQTB4Q3pBSkJnTlZCQU1UQW1OaE1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0NBZ0VBCjBUVUdPcWwvN0lKOUtPVlYzbUthM0EvZDdTMUlSUkhqbnNmcmg0NkRLbkovVUhJR2MxeE9oQjh0amxTcDZ3a2YKT1BsMU11VFFHSW9PUDBXOG9ocnZpL01CUTcvSzZYN2MxSDB0bDg3bVl1T0dVRVJ5MnJGMWJOaUc4VmVmSlhaTAo3bkRnMC9WVlM5U01pU3N5TXBaaGhQa2pwREJmbUh6RHQ0VkZBK3ZkQnVaa0l5ZFJXVDhZcUNDZEloT28yd3hNCnZHUzV5OUpQaTNld0VHcjdhdlFPcG8reDRqMVVLL3JOaUZla2ZEMlpaNS8wMWJSMk1NVE05TWM1aTZFUjl3ZHMKNVF4RHRDWGNXTDNEdEkxUWNXSmJCcWgzZ2ZQRzBhOU03d0RuZ1EzcTNtelB4RWR6ZkpLN21xMndvWDNHSXFRdQp5RFFyU3hqSTdJTHQ5T054ZnM2OTgrQmFGZlNrek4xcG8xMEdBVHZCN0tneHZxeW5lelgrN1V1VVJ1bXV5Rit1Cjc2Ri92ak1LOVJHV0VkSmorSWx3SmlJNlpRMVBCMS9rNEt4T3BTUytvY2N2bEtJMUZ2M3BoRDRSS3dnS21MM1oKcmZxcXhiei9wZTl2TGRXRm1xVk1BWjk5cXREWmdjTzRJQTZkT1EwTW1aZzdWNDN5dXRqdlZVSnhYdXZMUEZIMgpZMmdkaUJCMXpGSkRVa1V2UGhDVFVqREFZVTU3VWg2dUI1Ti9GWmZXOFBhNlBLQnJTUXlQNFVaRU1kWDMzc2p2Cnl2N3VKSTRVYkhrWHFFVTJuZmNQUjRlZ2tNVnBRcWw4ZWp1anl0enlINFE1Wk9SVXRZKytnbkEzVThlN0Q2OXgKQXY5RDhBWC85S0pSOGovYmdMc3c1cUVTRWdxVWJTRktmUXRuck1IM3Jja0NBd0VBQWFNak1DRXdEZ1lEVlIwUApBUUgvQkFRREFnS2tNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdEUVlKS29aSWh2Y05BUUVMQlFBRGdnSUJBTWJKCmZiWmk0M0xnZlNFczUwR1c4TFhOaEV1Q09GYXBrbjVJN2k1K3RtUlU3b3V2R2NDb284a1p1VjY0RDM2UlYva3AKUmdaTzNJTTFJejhlZXFzYVp3Qy9velhnZ0J6aHJkVzNaN0toSTAwVHVzb3h2cXdaUTlMQkpWcmk3QjF3Z2RicQpneTJwSkdqT1o3VlFKK3E4WTJGNm4rcDFJamxEcDNNUEFPSExxVVpaeDRCZjl1WVpURFNOSitmcmQ4Zm5JbUxUCkpqRjd1Ulg0d3pUNkVQRE5DdG9XN3p5RkJMQVp6L2tQeW1SbXpJR2ZtNWcwNkRNbi9rWmN4NVc1Skx1aWRKMkkKZXNjWHhuOW9rdlJkK1BMblRpeDF3aVJ5N3dTSk9kMlQrUHlNOXY1ejBhVEtHclh0RGFJZEs2RVE3WlRMNDNVNgpIZjV6ZE1jb3JLUEFoS2ZOVmxiK3EvZXptVU5ZU2gwMmxsUnBmWnBSbHVPV0huSklRZXc0VzJoR1FXa1JzSHhsCjFFU1U4QS8zR05naDJDYW44bzJWWVJlbk40M251TEFxK2FsclF6N2UxQlh0WUZ3ci9MNTBRbkFNTk8wa0JaRTgKWEQ5WUlSbW01LzA1RVQxNDhCZk5jYTJoY3UybUJzb1R0MjEzckIvQ3hUMTV1c3czdnFSVFYvMGlBZHMvdWhmYgpndGM0N09ER0Q2dVpEeEhUa2RMaDE0MEwwNmE1T2t1K1NyUnVOT1RxWGhKN2x0VXFRRC9Wdk9jTjhMR2VmMFhECmxIam9yUDhWMHVQa016eUpSWjM0RG9UZDhuai9URFJvY3FOTDdtN1BDZUtnSnZ2UXhHMVBnY2Nrd0tDRVF6cWIKRmhOTUtJdUsyY1NyQ2t6WkV1eHdQL1U4dm5UMTVtaDM2RXdwb0FSMQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
                server: https://cmk8s-aks-dev-dns.hcp.eastus2.azmk8s.io:443
              name: cmk8s-aks-dev
            contexts:
            - context:
                cluster: cmk8s-aks-dev
                user: clusterAdmin_itp_cmk8s-aks-dev
              name: cmk8s-aks-dev
            current-context: cmk8s-aks-dev
            kind: Config
            preferences: {}
            users:
            - name: clusterAdmin_itp_cmk8s-aks-dev
              user:
                client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FUkFEQU4KTVFzd0NRWURWUVFERXdKallUQWVGdzB5TURBMU1UZ3dNekl3TXpSYUZ3MHlNakExTVRnd016TXdNelJhTURBeApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1SVXdFd1lEVlFRREV3eHRZWE4wWlhKamJHbGxiblF3CmdnSWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUURZaERDUHVvWUZLYWh0RTFuVUZEbjkKemRKMklVRWx4elUwNVpiZ2FhRk1iZUxDeFFaUGw1bEdnYllpZXNxL0JFZE5JRG9KNUxmaDFGZFhJZ0JkNW93dwpvcHZCN2Y1aTVQL3V4Rnc3WCtjYWptenlvMklmRzNsb01VSWtjd1pHV0dBNml3dlMzZThCcWZaYWQvdWVXbjZKCjFWVUowNEhka0g0NTdrTEM3SGRRaXNFSWJoa2lRQUNFUjdnSU41bEozVXlIUGphYnlIa2JFNW1relkvaTV6eGUKcXBmQkhpUVRtSkZ1QjhISkRlVVdUZXdwdzRuOEtjY243Q0F3a2Rqd2l5S1NrQUp6ellYNElTa2dkdWowZm01TwpSVVIxWXJGSDlQZHJDaHB1QzVMbXIvR2FlM29ZR0FTQ0pyTEx3ZFdyMEYwYVloeFRCL1dkNjdGWVUrc1QzOGwwCmg4MXVJVjJEb2tlSXBHbit6N3Q2YXlXeVo0VVdJdGRKSWRjS2VjZFF2bW5VQWRKV2h6bU4za1VLcUdabkFVdk4KdFZRZkdSN29EVm5UMzdsbzBqMmQ4Q2ZMRkFrWmtnY085bjMvYXdSNmFzRnFDWEVSR2xuTEQ4TWdXenp0cFU0cgpPK1pHNm5lVm1reE1lN2swdi9uYk00aGIyUHB6RjFRTkFKV2Z5K2M0Y0g2QW5YTFhHYmRWSVBhQ2FFRkU5cEg5ClZWeEt2WkkyMjFNNkNWN3R5aWRKWXpJeDljWU4wWlVGTjhseFc2U1pkYzVJNWs2VVFsZFpKWXl1OXQxTmozQTcKNm9RSnVNOHdnL3hlQVpmWjVXN3N3T2pUZE5sbWc4enJ1d1VJWk52ODZJVDU5SnVCS3dtdk8zVXh2cG1uSGYrSApXZUpiTXBTUHNUclhmamNBcm9GOUJ3SURBUUFCb3pVd016QU9CZ05WSFE4QkFmOEVCQU1DQmFBd0V3WURWUjBsCkJBd3dDZ1lJS3dZQkJRVUhBd0l3REFZRFZSMFRBUUgvQkFJd0FEQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUEKQ0p6Z3NrL1R4VEpOajh1dno5cVNIUWdqNjNUaXJKSURVb1E4M0loT3ZOMEhpVDBrRnhuT2tqS2dIbTh5R0VvcQpwNGQ5YnBWM04xb0tNL05GZ1hmQ3B1UUZ1a0hyZHJ3cXhsdFdrUDJHeE92QzRWRDVMRTJ2NWVHVmI0NE1USER5CnlEMC9EdERmclZPOVZaZEh5ZGJ3d01VaUF1c05JK2RKZ3Z2dGZBNWhlb0xudmlKTWtJK05vMzBNenRIWmdiMkEKV2dqdE5IM2d4cXA0MzZPa1ZWY1NsSXhBbEcxNlE5V0lDTzU2emRBVTlxTmUxaFRUZU5ZaHNHTk1kVXBXc29KeAptK2dxa3RTdmZ6MGR1d212eS84QjBycjdHL2tnMjFmRzNQb2srZ1FjZ0FJSFQvVi9QVWYrekF4TWtNNWhPZ1NKCmxzaU5RQ3RnVm9rZ1BWcWFBbEtWdmk5WXN2eVdJMUQrdStXYXY0V1NyQTJWUXM5YmZYQ2Fld2x6S3FIcVIxNHoKZ2tjbWU0UzJLRU1oN2F0cmdqY3V3Q3ltUmVTYmxBTFRXbERmcVI0ZU1qRTRZUWNLcGR0aVkxZHpHcTgxR01SegpoamNkUm1qelF3Uk5yQVRVNmNrQncrbVRNVU52MWRGeTF3cjhoVjE0MGpEUncyb1ZqclovQXVhR1gwVU9YaTdICk5ZalpyRkxLN1VnMTQwN21YbDhsWmszM1V1cmp0R0Y0dzdpdlh5My9CVTBzbWlhZzVkZGVlZnBpMGs5c2UxU3cKR0xGd2pyKzFqenJKN21XZ3JIU0trRFJuVkk2RWJSK01qZDY3N3FSUmNlOVFCTWVIT2xhSDV5eUJ1MU5GSTEzOQo5VWQ1UzdvVEJ5bzFObExrUis2RjhkZGd1bVA1TVNoYmYxNTh6akcyNWxZPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
                client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVkt3c1VHClQ1ZVpSb0cySW5yS3Z3UkhUU0E2Q2VTMzRkUlhWeUlBWGVhTU1LS2J3ZTMrWXVULzdzUmNPMS9uR281czhxTmkKSHh0NWFERkNKSE1HUmxoZ09vc0wwdDN2QWFuMlduZjdubHAraWRWVkNkT0IzWkIrT2U1Q3d1eDNVSXJCQ0c0WgpJa0FBaEVlNENEZVpTZDFNaHo0Mm04aDVHeE9acE0yUDR1YzhYcXFYd1I0a0U1aVJiZ2ZCeVEzbEZrM3NLY09KCi9DbkhKK3dnTUpIWThJc2lrcEFDYzgyRitDRXBJSGJvOUg1dVRrVkVkV0t4Ui9UM2F3b2FiZ3VTNXEveG1udDYKR0JnRWdpYXl5OEhWcTlCZEdtSWNVd2YxbmV1eFdGUHJFOS9KZElmTmJpRmRnNkpIaUtScC9zKzdlbXNsc21lRgpGaUxYU1NIWENubkhVTDVwMUFIU1ZvYzVqZDVGQ3FobVp3Rkx6YlZVSHhrZTZBMVowOSs1YU5JOW5mQW55eFFKCkdaSUhEdlo5LzJzRWVtckJhZ2x4RVJwWnl3L0RJRnM4N2FWT0t6dm1SdXAzbFpwTVRIdTVOTC81MnpPSVc5ajYKY3hkVURRQ1ZuOHZuT0hCK2dKMXkxeG0zVlNEMmdtaEJSUGFSL1ZWY1NyMlNOdHRUT2dsZTdjb25TV015TWZYRwpEZEdWQlRmSmNWdWttWFhPU09aT2xFSlhXU1dNcnZiZFRZOXdPK3FFQ2JqUE1JUDhYZ0dYMmVWdTdNRG8wM1RaClpvUE02N3NGQ0dUYi9PaUUrZlNiZ1NzSnJ6dDFNYjZacHgzL2gxbmlXektVajdFNjEzNDNBSzZCZlFjQ0F3RUEKQVFLQ0FnRUFrZytpL3VMU2xGc0U3d2hWMmZjSEpBdWNSZXFyRzBRbXhaZDRUODJTYlkvWG9KTHZiZlFVQjNkcgptaGtCK3hoMHpUZkhUM05IQlFhTklRK2o5YlNZc0JxU1BxSkJzUTlSQkE3ZE5ZUzl6N0Z6RjhCV2FpdkxuQmxXCnlHWDhQcXBSeUV5UzNsNnZaSXoyenhNUDRFU21CbSt1M1dFY3c0NDlTUEZOZ2xlcEtlRmcxVUlJbkkxV2krWWgKNVJFMHpKcUlqTmZRV1FsRmdabVlWWkFDMkF3c01xU2NtVCt2RUxVa3JuaDNKeDNEaEdkdXdNSFRyUk8xOFYyZQpYWVdXTnJkMXpDOXdLQlRtb253a1ZXMUNPK1dxbmd5bVlSWUNDRXZlT1F4b3hnSHl5TUs2bHY5alh5dWNwdnhhCk01Q0FoMWFaNkRsMWFDSC9kTmhTSEFjSWw3Q3BJa0NCT2dnK0w2OUVRNzNxa0xzUkVxWXlmUXFHUmJRbkZKK04KWm13WmtEc0RtRGt4QnRGcC9BOU16d0YvZ2NlUnRwSy9KZ1VDT3RLd3A4dDY1T1RIRzFnLy9nYk5tcFkyTmFsQgpzN3c5VjhJTWJoTERieWgyanBKSEFFQTNBdW1jQ3FXVDM5R3daTU42WkE3dlJRc0dQYXBoTVhxY1IrVlc2RTY3ClJQS2F3SFUxaHhNZThPMDVZbTBrdVIrRDdjeDdEOU5EY0FicDdWcFZDODlhU0hqcWlVMlVhRFI1U2ZBT3k2dVcKUDM3dW1zWmxHTE9ZdVBZcmVwZ3ltWU9DcXc4eWxXWThkT1NvSUptMGFiRitvVVp0YVhNL1NiTVRJVDJWcGQ5TgpUcEFNNWtPeUhRWDFtcE4xY1NtbDBFMTdpK3JNVTROSVNmaVU1YVFJMVc4WGpGRHp3SEVDZ2dFQkFQZ1pONjJ4ClhTclY1STZrRTN3SU5OZS93a3hxaEtLT1lxMlJZc1hEN1gxZlVGTExLQlNzQ2g1VndiQ3M4ODNlWFBRa1ZVQi8KUDNONjMrckNHTE45MEM1T2txNmp4aWZ1a2Ztc0xqcDU0TEo3b3V0OS9DK1h6ZjFoTzlsZUpDVDk0bjhQS0dyLwpxVzM5SlRlRThwV043WkVaTTRtTktkWE91QTNzRGlkeGlrZTZ3MzFITkFLY0w2SmxPalplcmR2aEk1QnVWYi9sCjBtZEkzRDFkZGdoSkswNjJRcTgzQzZhdFZNR3M3WFpoVWE0YzJBdjgyd1o5T2JvN2dGUVZOUS9Ea1lQR1FYdUoKR1lsVWFENmtpU0tFWFpvVjZOenZJWGlJVG5sWDRpWjc0QmgxbS92L0s3L2VtNVNPMi8rc2hXK2lQTnhyTGRoeQpReGREbGNOZVRxaVV2SmtDZ2dFQkFOOXBlbitCdmQ4b0JBcnhlZzZYdzE3M0Z6UGlpM2NNNE1tWmVMTVJ5VnZmCjl3MmJjMksyRzhhQjhWL1NUb0EwbmtneEdUUHhYanc0UXZGeWdmWEpyL0M0VDlCT2JhUHFBOTNsalFscVJja1cKTzJTblFiWld1NFo0bVh4R2M4RFFORmlWQWZjZFVyZGRkdFNqYVZBZ2kyNW9mTnR6dTlhL0tha3R2aVgxVC9BVwpqck05dUdMdUFhU1VxWDFrVGlkOUNzUVBOeWZycUN1eFYvK1dFWFp5akRhSWp4dnV1amc5N1hHYzJuMTdDelRmClEvOEtJaW1hbVBOR1lRR0w1cXJOdFVQandVWFg3bko3bStJYzBvOFpnakhXdWc1YWJaNTliVnZJeURNUVo5cGgKMUhveVR0Nkt5MlNTR0taQkZDUWc0aklIZDQ2WEVVTDhPOXBnR0pqeGFwOENnZ0VBS3NVZUppRm5jRlVEVzl2SgpTQjZhRFgrUFhXRVhrSFovYUhDaDJIb1lYUDZyZURweHBHNnNKK0tjeTNwbFpWNHFKQ1NIVmVFWjdTeUhvWTdvCmR6ai9SSnhqQ1J4T3N0K2I1ckRhSDFhWGQrMThmcUJ2Y3p6MlUvSUpRVVhMY1YwYlNOQXlKWkFCZzJhYW5lR2IKZUZESlhiUThnRUFIc0VZODBKbWJMdzJSeXgvVlI2bVl1OEoxSzhmTHEwZlRMUTY0OU5Nd2tTNXJnVWE4UVEvMQpveVFLQlQzQ2JUWk9HZVBUc3JlL0VDTmkwMk5CazM5NXVycW4wd1VpOEZ2ZmsrSWhHZGg1dlhRN0pNT2FYUUk4CmFlanJ3ZjU0OEcyQkZhaFo3dTFKblZ6Sm15M2JRQ3dUUExhQmw3Q3hHSGlEWUdWVm5LSVZlelRuZ0FFMHRrTngKeC9vc01RS0NBUUVBbnN1a0xEa1ZzaVlKS1pZVndZV1JjbENDaDNpQTFLK3NudDZjOGZxMGVyOG9KTjNYRjlTRQp6WVhUQU43RXVVK3RLWGJzaVFVSWpCa1pTL0N0K3Z2T09IVnBGWkNKVWJhbDVQU2lXSXpXNldVSjlqTUQvQXlOCjRiaWFyOENMeWdLekVqdG5XRFBaZFVmVGpMUlJ5SWc1VXRLbDNIM1loM3o4cWFrL3ZFOHU4R0c0TUNLd2luRE4KYmlQVWpMSGM4eWhubkkrTURxM3JySkt6RDVHaysrSFRVM2VnOEtPd2JRVm5YaGUxSFBkMk1iQjM3akZQc3U2Vgp4R1REMG91VCt0ZVgvWmRHNnRQZVFqVWx5WVBmRGFOOTdOckpDQ2F5UDdLN0prQUNQSGx1dDhSTmVFV0YxWndsCmtXaGVhTjFjNllrTi9hMWRCMWJOQ0NXc2pUMDhmb2twMVFLQ0FRQmF2WUhZU0pTMDVGV3RuK09uMUx5SkxiWEkKTTN3OHlvRk10WWdITlNpRG5hN1o1eG9FdzlPTXZTY21KaHhzcWIwQm5EMXoydkxncTVzZUJsNWVpcDFib2dSSQpkc2VYUXBkUUhJaXdqSmxLUTBXcXFuMG9PNmpIYkE3cmx1c2YyRTdGY0dQTFoyNWRValFkSHE5bUxvNFVmaUhzClhxOU1XWEJvV1BuVnVCQzBydm01bVcvZVREM3FNUFZpNlJMaVFBWTBWNURZb3k4WGNKcXE5aFYzU1dxS0o4Tk4KcWtGUDZENkZKdk5GWUhDUjFvcUFuVW1naDFpTHkrQVpkaTA0eldydEJIWmp5M3ZYNlVBUUw2TXA2T3k2MlBMYQpPeDRqOEFWVytESXU0eURaZGF1d1I2MWsrVUNySXVHeUZnWTkwYUdUVWRYYzNaMlQrbWJHeERtUTdocmcKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
                token: 5609ed710b4f2a65c2e3ac1d66f16048304aee69e76fa78c37a3c45a1b562a2e48f9dbbefcf436a53b08f012d9228602a98a
        - name: COMPUTE_ENTITY_JSON
          value: '{"id":"mlc-aks-yuyu3","name":"mlc-aks-yuyu30fa819085","location":"eastus","tags":null,"properties":{"id":"2018a8b9-4455-4400-a387-38afc24d4f72","resourceId":"/subscriptions/e9b2ec51-5c94-4fa8-809a-dc1e695e4896/resourcegroups/itp/providers/Microsoft.ContainerService/managedClusters/cmk8s-aks-dev","description":null,"provisioningState":"Creating","provisioningErrors":null,"isAttachedCompute":true,"computeType":"CmAks","properties":{"clusterPurpose":"DevTest","nodePool":"agentPool","nodesCount":3}},"subscriptionId":"e9b2ec51-5c94-4fa8-809a-dc1e695e4896","workspaceId":"cmaks-test-ws-master\n","workspaceGuid":"ae67ce98-38b7-4fff-99f3-f5dcaa0a3280","computeId":"mlc-aks-yuyu3","resourceGroup":"itp","managedByResourceGroup":null,"isByokEnabled":false,"AsyncOperationId":null,"DeleteStartedOn":null,"partitionKey":"ae67ce98-38b7-4fff-99f3-f5dcaa0a3280","docType":null,"createdTime":"2020-05-25T16:59:24.4084757+08:00","deletedTime":null,"modifiedTime":"2020-05-25T16:59:24.4084757+08:00"}'
        image: cmaksacr.azurecr.io/cmk8s/yuyu3/mlc/agent-setup:05-29
        imagePullPolicy: Always
        name: cmaks-init-job-container
      imagePullSecrets:
      - name: cmaks-image-pull-secret
      restartPolicy: OnFailure
